---
layout: post
title: "Today I learned 21.06.16"
category: MEMO
date: 2021-06-16 19:00:00 +0900
---
## CS

### 1. Network

1. OSI 7계층 - 네트워크 프로토콜 디자인 및 통신의 계층 모델. 현재는 TCP/IP 4 layer 사용

    ![OSI 7계층](https://user-images.githubusercontent.com/77161691/126037713-be45bcd1-69e2-4c8e-87ec-88b9356723d1.png)

    - 각 계층은 하위 계층의 기능만을 이용하고, 상위 계층에게 기능을 제공한다. '프로토콜 스택'은 이러한 계층들로 구성되는 시스템.
    - 계층으로 나눈 이유
        1. 표준화 : 이질적인 포트 문제나 프로토콜 등으로 인한 문제를 해결하여 비용을 절감
        2. 관리 : 계층별의 기능과 통신 과정을 나누어서 쉽게 알 수 있고, 특정한 곳에 이상이 생기면 그 단계만 수정할 수 있기 때문에 편리(계층 간의 독립성)
    - 프로토콜 : 네트워크 통신규약
    1. **물리** : 기본 네트워크 하드웨어 전송 기술 (Bit 단위)
        - 프레임 내부의 각 비트를 한 노드에서 다음 노드로 실제로 이동. (케이블, 허브, 리피터)
    2. **데이터 링크** : 물리 계층을 통해 송수신되는 정보의 오류와 흐름을 관리하여 Node to Node 간 신뢰성있는 전송을 보장. (Frame 단위) (Ethernet 등)
        - MAC 주소(장치가 만들어질 때 물리적으로 할당 받아서 변할 수 없는 고유 값)를 이용해 통신. CRC 기반의 오류 제어와 흐름 제어. (스위치, 브릿지)
    3. **네트워크 :** 여러 개의 노드를 거칠 때마다 경로를 찾고 데이터를 목적지까지 가장 안전하고 빠르게 전달하는 기능을 담당. (Datagram(Packet) 단위) (IP 등)
        - 라우터를 통해 이동할 경로를 선택하여 IP 주소를 지정하고 해당 경로에 따라 패킷을 전달.(라우팅) 흐름 제어, 오류 제어, 세그먼테이션 등을 수행한다. (라우터)
    4. **전송 :** End to End 간 신뢰성있는 전송을 보장. 상위 계층들이 데이터 전달의 유효성이나 효율성과 독립될 수 있도록 함. (Segment 단위) (TCP, UDP 등)
        - 시퀀스 넘버 기반의 오류 제어. 메시지가 클 경우 이를 MTU에 따라 나눠서 네트워크 계층으로 전달하고, 받은 패킷을 재조립해서 상위 계층으로 전달한다.(Segmentation)
        - TCP : 연결 지항형 통신(가상 회선 방식). 패킷의 시퀸스 번호 등을 이용해서 손실, 중복, 순서에 대해 신뢰성을 보장하며 흐름제어, 혼잡제어 등의 서비스를 제공.
        - UDP : 비연결형 통신(데이터그램 방식). 신뢰성, 흐름제어, 혼잡제어를 제공하지 않음.
        - TCP가 신뢰성이 더 높고, UDP가 더 빠름. HTTP/3부터는 TCP 대신 UDP 기반 QUIC(Quick UDP Internet Connection) 사용. → cuz TCP는 보안을 위한 제약(handshake, HOLB) 때문에 속도가 느림. 프로토콜이라 크게 변경할 수도 없음. 그렇기에 UDP를 사용하되 신뢰성 기능을 확장한 UDP 사용 ([https://evan-moon.github.io/2019/10/08/what-is-http3/](https://evan-moon.github.io/2019/10/08/what-is-http3/))
    5. **세션** : 양 끝단의 응용 프로세스가 통신을 관리하기 위한 방법을 제공. TCP/IP 세션을 만들고 없애는 책임. (API, socket 등)
        - 인터넷의 계층구조에는 포함되어 있지 않아 응용 계층에서 지원하거나 직접 개발해야 함.
        - 동시 송수신 방식(duplex), 반이중 방식(half-duplex), 전이중 방식(Full Duplex)의 통신과 함께, 체크 포인팅과 유휴, 종료, 다시 시작 과정 등을 수행.
    6. **표현** : 애플리케이션들이 교환되는 데이터의 의미를 해석하도록 하는 서비스를 제공. 데이터의 표현, 저장, 압축, 암호화, 코드 번역 담당. (JPEG, MPEG 등)
        - 인터넷의 계층구조에는 포함되어 있지 않아 응용 계층에서 지원하거나 직접 개발해야함.
        - 이 계층의 프로토콜은 정해지지 않음 → 통신 시, 인코딩 방법을 결정하고 직접 형태를 변경해서 보내거나 알려줘야 함. 받는쪽과 인코딩 형태가 맞지 않으면 받은 데이터를 잘못 해석할 수 있음.
    7. **응용 :** 응용 프로세스와 직접 관계하여 일반적인 응용 서비스(UI, Email, DB 관리)를 수행. (HTTP, FTP, DNS 등)
        - 응용 프로그램들이 통신으로 활용하는 계층이며 새로운 응용 계층 프로토콜 추가가 쉬움.
    - 데이터 통신의 흐름
        1. 통신하는 프로그램에서는 최초 전송하고자 하는 데이터에 응용 계층의 프로토콜에 맞는 헤더를 붙여서 패킷 생성.
        2. 만들어진 메시지들은 하위 계층으로 전송되면서 헤더, 테일이 붙게 됨.
        3. 완성된 비트들은 물리 계층을 통해 전송.
        4. 스위치, 라우터 등 중간 장치를 거치면서 해당 장비에 맞는 만큼만 헤더를 읽으며 내부 내용을 상위 계층으로 전달하며 해석하고, 다시 그에 맞는 하위 계층 헤더를 붙여서 전송.
        5. 최종 목적지에 도착한 경우 헤더를 인식하여 그에 맞는 처리를 하며 상위 계층에 전송하고 최종적으로 데이터가 프로그램에게 전달.
